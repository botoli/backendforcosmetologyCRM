-- database/fixed_dump.sql - –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –î–ê–ú–ü
SET client_encoding = 'UTF8';
SET session_replication_role = 'replica';

-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ç–∞–±–ª–∏—Ü—ã –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
DROP TABLE IF EXISTS bookings CASCADE;
DROP TABLE IF EXISTS notifications CASCADE;
DROP TABLE IF EXISTS services CASCADE;
DROP TABLE IF EXISTS telegram_links CASCADE;
DROP TABLE IF EXISTS users CASCADE;

-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã —Å PostgreSQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º
CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    phone VARCHAR(20) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    surname VARCHAR(100) NOT NULL,
    role VARCHAR(20) DEFAULT 'client' CHECK(role IN ('client', 'admin')),
    telegram_id VARCHAR(100) UNIQUE,
    telegram_username VARCHAR(100),
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS services (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    category VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    duration INTEGER NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS bookings (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    service_id INTEGER NOT NULL,
    booking_date DATE NOT NULL,
    booking_time TIME NOT NULL,
    status VARCHAR(20) DEFAULT 'pending' CHECK(status IN ('pending', 'confirmed', 'cancelled', 'completed')),
    comment TEXT,
    telegram_notification BOOLEAN DEFAULT FALSE,
    notification_sent BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(service_id) REFERENCES services(id) ON DELETE CASCADE,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS notifications (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    booking_id INTEGER,
    type VARCHAR(50) NOT NULL,
    title VARCHAR(255) NOT NULL,
    message TEXT NOT NULL,
    is_sent BOOLEAN DEFAULT FALSE,
    sent_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(booking_id) REFERENCES bookings(id) ON DELETE CASCADE,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS telegram_links (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    link_code VARCHAR(10) NOT NULL UNIQUE,
    telegram_id VARCHAR(100),
    telegram_username VARCHAR(100),
    is_verified BOOLEAN DEFAULT FALSE,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ services (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –°–ò–ù–¢–ê–ö–°–ò–°)
INSERT INTO services (id, name, category, description, price, duration, is_active, created_at) VALUES 
(1,'–£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–∞—è —á–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–ì–ª—É–±–æ–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Ä —Å –ø–æ–º–æ—â—å—é —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–∞',1800,60,true,'2025-10-26 19:17:30'),
(2,'–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —á–∏—Å—Ç–∫–∞ —Å —Ä—É—á–Ω–æ–π –∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π',2500,90,true,'2025-10-26 19:17:30'),
(3,'–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π','–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞','–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –∏ —Ç–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π –º–∞—Å—Å–∞–∂',1500,45,true,'2025-10-26 19:17:30'),
(4,'S-—É—Ö–æ–¥','–£—Ö–æ–¥ –ª–∏—Ü–∞ —Å –º–∞—Å—Å–∞–∂–µ–º','–ë–∞–∑–æ–≤—ã–π —É—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π –ª–∏—Ü–∞',1500,45,true,'2025-10-26 19:17:30'),
(41,'M-—É—Ö–æ–¥','–£—Ö–æ–¥ –ª–∏—Ü–∞ —Å –º–∞—Å—Å–∞–∂–µ–º','–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π –ª–∏—Ü–∞',2000,60,true,'2025-10-26 19:41:28'),
(42,'L-—É—Ö–æ–¥','–£—Ö–æ–¥ –ª–∏—Ü–∞ —Å –º–∞—Å—Å–∞–∂–µ–º','–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –∫–æ–∂–µ–π –ª–∏—Ü–∞',2700,90,true,'2025-10-26 19:41:28'),
(49,'–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞ + –º–∏–∫—Ä–æ—Ç–æ–∫–∏','–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —á–∏—Å—Ç–∫–∞ —Å –º–∏–∫—Ä–æ—Ç–æ–∫–∞–º–∏ –¥–ª—è —Ç–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–∂–∏',3000,120,true,'2025-10-26 23:40:40'),
(50,'–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π','–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞','–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –º–∞—Å—Å–∞–∂–∞ –¥–ª—è –æ–º–æ–ª–æ–∂–µ–Ω–∏—è',2000,60,true,'2025-10-26 23:40:40'),
(51,'XL-—É—Ö–æ–¥','–£—Ö–æ–¥ –ª–∏—Ü–∞ —Å –º–∞—Å—Å–∞–∂–µ–º','–≠–∫—Å—Ç—Ä–∞-—É—Ö–æ–¥ —Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–º –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ–º',3200,120,true,'2025-10-26 23:40:40'),
(52,'XXI-—É—Ö–æ–¥','–£—Ö–æ–¥ –ª–∏—Ü–∞ —Å –º–∞—Å—Å–∞–∂–µ–º','–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π —É—Ö–æ–¥ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞',3500,140,true,'2025-10-26 23:40:40'),
(53,'–ö–∞—Ä–±–æ–∫—Å–∏—Ç–µ—Ä–∞–ø–∏—è','–£—Ö–æ–¥ –ª–∏—Ü–∞ –±–µ–∑ –º–∞—Å—Å–∞–∂–∞','–¢–µ—Ä–∞–ø–∏—è —É–≥–ª–µ–∫–∏—Å–ª—ã–º –≥–∞–∑–æ–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è',2000,45,true,'2025-10-26 23:40:40'),
(54,'–î–µ—Ä–º–∞–ª–µ–Ω','–£—Ö–æ–¥ –ª–∏—Ü–∞ –±–µ–∑ –º–∞—Å—Å–∞–∂–∞','–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –î–µ—Ä–º–∞–ª–µ–Ω',2000,60,true,'2025-10-26 23:40:40'),
(55,'–ö–æ–ª–ª–∞–≥–µ–Ω-–∞–∫—Ç–∏–≤','–£—Ö–æ–¥ –ª–∏—Ü–∞ –±–µ–∑ –º–∞—Å—Å–∞–∂–∞','–ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—ã—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ª–ª–∞–≥–µ–Ω–∞',2000,60,true,'2025-10-26 23:40:40'),
(56,'–ú–∞—Å–∫–∞ –ê—Ñ—Ä–æ–¥–∏—Ç—ã','–£—Ö–æ–¥ –ª–∏—Ü–∞ –±–µ–∑ –º–∞—Å—Å–∞–∂–∞','–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∞—è –º–∞—Å–∫–∞',2500,60,true,'2025-10-26 23:40:40'),
(57,'–ü–∏–ª–∏–Ω–≥ (–º–∏–Ω–¥–∞–ª—å–Ω—ã–π, –¥–∂–µ—Å—Å–Ω–µ—Ä–∞, –≥–ª–∏–∫–æ–ª–µ–≤—ã–π)','–ü–∏–ª–∏–Ω–≥–∏','–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∏–ª–∏–Ω–≥ –Ω–∞ –≤—ã–±–æ—Ä: –º–∏–Ω–¥–∞–ª—å–Ω—ã–π, –¥–∂–µ—Å—Å–Ω–µ—Ä–∞ –∏–ª–∏ –≥–ª–∏–∫–æ–ª–µ–≤—ã–π',2000,45,true,'2025-10-26 23:40:40'),
(58,'RF-–ª–∏—Ñ—Ç–∏–Ω–≥','–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è','–†–∞–¥–∏–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –ª–∏—Ñ—Ç–∏–Ω–≥ –¥–ª—è –ø–æ–¥—Ç—è–∂–∫–∏ –∫–æ–∂–∏',2500,60,true,'2025-10-26 23:40:40'),
(59,'RF-–ª–∏—Ñ—Ç–∏–Ω–≥ –∏–≥–æ–ª—å—á–∞—Ç—ã–π','–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è','–ò–≥–æ–ª—å—á–∞—Ç—ã–π —Ä–∞–¥–∏–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π –ª–∏—Ñ—Ç–∏–Ω–≥',10000,60,true,'2025-10-26 23:40:40'),
(60,'–ú–∏–∫—Ä–æ—Ç–æ–∫–∏ (30 –º–∏–Ω)','–ú–∏–∫—Ä–æ—Ç–æ–∫–∏','–ú–∏–∫—Ä–æ—Ç–æ–∫–æ–≤–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ç–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∏—è –º—ã—à—Ü',1500,30,true,'2025-10-26 23:40:40'),
(61,'–ú–∏–∫—Ä–æ—Ç–æ–∫–∏ (45 –º–∏–Ω)','–ú–∏–∫—Ä–æ—Ç–æ–∫–∏','–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–∞—è –º–∏–∫—Ä–æ—Ç–æ–∫–æ–≤–∞—è —Ç–µ—Ä–∞–ø–∏—è',2000,45,true,'2025-10-26 23:40:40'),
(62,'–í–¥–æ–≤–∏–π –≥–æ—Ä–±','–ú–∏–∫—Ä–æ—Ç–æ–∫–∏','–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–¥–æ–≤—å–µ–≥–æ –≥–æ—Ä–±–∞ –º–∏–∫—Ä–æ—Ç–æ–∫–∞–º–∏',1000,30,true,'2025-10-26 23:40:40'),
(63,'–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π/—Ä–µ—Å–Ω–∏—Ü','–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±—Ä–æ–≤–µ–π, —Ä–µ—Å–Ω–∏—Ü','–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π –∏–ª–∏ —Ä–µ—Å–Ω–∏—Ü',500,30,true,'2025-10-26 23:40:40'),
(64,'–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–æ—Å–∫–æ–º/–ø–∏–Ω—Ü–µ—Ç–æ–º','–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±—Ä–æ–≤–µ–π, —Ä–µ—Å–Ω–∏—Ü','–ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ñ–æ—Ä–º—ã –±—Ä–æ–≤–µ–π –≤–æ—Å–∫–æ–º –∏–ª–∏ –ø–∏–Ω—Ü–µ—Ç–æ–º',500,30,true,'2025-10-26 23:40:40'),
(65,'–õ–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü/–±—Ä–æ–≤–µ–π','–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±—Ä–æ–≤–µ–π, —Ä–µ—Å–Ω–∏—Ü','–õ–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —É—Ö–æ–∂–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∞',2000,60,true,'2025-10-26 23:40:40'),
(66,'–ë–∏–∫–∏–Ω–∏ –≥–ª—É–±–æ–∫–∞—è','–î–µ–ø–∏–ª—è—Ü–∏—è','–ì–ª—É–±–æ–∫–∞—è –∑–æ–Ω–∞ –±–∏–∫–∏–Ω–∏',1300,30,true,'2025-10-26 23:40:40'),
(67,'–ë–∏–∫–∏–Ω–∏ –∫–ª–∞—Å—Å–∏–∫–∞','–î–µ–ø–∏–ª—è—Ü–∏—è','–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∑–æ–Ω–∞ –±–∏–∫–∏–Ω–∏',1000,30,true,'2025-10-26 23:40:40'),
(68,'–ü–æ–¥–º—ã—à–∫–∏','–î–µ–ø–∏–ª—è—Ü–∏—è','–î–µ–ø–∏–ª—è—Ü–∏—è –ø–æ–¥–º—ã—à–µ—á–Ω—ã—Ö –≤–ø–∞–¥–∏–Ω',500,20,true,'2025-10-26 23:40:40'),
(69,'–†—É–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é','–î–µ–ø–∏–ª—è—Ü–∏—è','–ü–æ–ª–Ω–∞—è –¥–µ–ø–∏–ª—è—Ü–∏—è —Ä—É–∫',1200,45,true,'2025-10-26 23:40:40'),
(70,'–ù–æ–≥–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é','–î–µ–ø–∏–ª—è—Ü–∏—è','–ü–æ–ª–Ω–∞—è –¥–µ–ø–∏–ª—è—Ü–∏—è –Ω–æ–≥',1500,60,true,'2025-10-26 23:40:40'),
(71,'–ö–æ–º–ø–ª–µ–∫—Å','–î–µ–ø–∏–ª—è—Ü–∏—è','–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–µ–ø–∏–ª—è—Ü–∏—è',3000,120,true,'2025-10-26 23:40:40'),
(72,'–ú–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è','–ú–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è/–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è/–ë–æ—Ç–æ–∫—Å','–ò–Ω—ä–µ–∫—Ü–∏–æ–Ω–Ω–∞—è –º–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è',3500,60,true,'2025-10-26 23:40:40'),
(73,'–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è','–ú–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è/–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è/–ë–æ—Ç–æ–∫—Å','–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –æ–º–æ–ª–æ–∂–µ–Ω–∏—è',5000,60,true,'2025-10-26 23:40:40'),
(74,'–ë–æ—Ç–æ–∫—Å','–ú–µ–∑–æ—Ç–µ—Ä–∞–ø–∏—è/–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è/–ë–æ—Ç–æ–∫—Å','–ë–æ—Ç–æ–∫—Å-—Ç–µ—Ä–∞–ø–∏—è –æ—Ç 2000 —Ä—É–±',2000,45,true,'2025-10-26 23:40:40'),
(75,'–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞','–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è','–ü–µ—Ä–≤–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞',0,30,true,'2025-10-29 21:04:00'),
(76,'–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞','–£—Ö–æ–¥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã','–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —á–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞',3000,60,true,'2025-10-29 21:04:00'),
(77,'–ë–æ—Ç–æ–∫—Å','–ò–Ω—ä–µ–∫—Ü–∏–∏','–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –º–æ—Ä—â–∏–Ω –±–æ—Ç—É–ª–æ—Ç–æ–∫—Å–∏–Ω–æ–º',15000,45,true,'2025-10-29 21:04:00'),
(78,'–ë–∏–æ—Ä–µ–≤–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è','–ò–Ω—ä–µ–∫—Ü–∏–∏','–£–≤–ª–∞–∂–Ω–µ–Ω–∏–µ –∏ –æ–º–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–∂–∏',12000,60,true,'2025-10-29 21:04:00'),
(79,'–ü–∏–ª–∏–Ω–≥','–£—Ö–æ–¥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã','–•–∏–º–∏—á–µ—Å–∫–∏–π –ø–∏–ª–∏–Ω–≥',5000,45,true,'2025-10-29 21:04:00');

-- –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ users (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –°–ò–ù–¢–ê–ö–°–ò–°)
INSERT INTO users (id, email, phone, password_hash, name, surname, role, telegram_id, telegram_username, is_active, created_at, updated_at) VALUES 
(19,'StIrin-ka@yandex.ru','+79254439529','$2a$10$8K1p/a0dRTphB6bZ6.8Qk.Yz6yq7bB5B5j5J5J5J5J5J5J5J5J5J5','–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä','–°–∏—Å—Ç–µ–º—ã','admin','7780599269','bobolie',true,'2025-10-27 00:32:36','2025-10-27 00:32:36'),
(22,'standrey2007@gmail.com','89689370544','$2a$10$8K1p/a0dRTphB6bZ6.8Qk.Yz6yq7bB5B5j5J5J5J5J5J5J5J5J5J5','–ê–Ω–¥—Ä–µ–π','qwe','client','964264865','Grmmy',true,'2025-10-27 10:48:03','2025-10-27 10:48:03');

-- –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ telegram_links (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –°–ò–ù–¢–ê–ö–°–ò–°)
INSERT INTO telegram_links (id, user_id, link_code, telegram_id, telegram_username, is_verified, expires_at, created_at) VALUES 
(8,1,'W9Y7MN','964264865','Grmmy',true,'2025-10-27 01:16:35','2025-10-27 01:06:35'),
(9,1,'KYFPAT',NULL,NULL,false,'2025-10-27 10:17:55','2025-10-27 10:07:55'),
(10,1,'NUI8K7','964264865','Grmmy',true,'2025-10-27 10:58:24','2025-10-27 10:48:24'),
(11,22,'VK1RAS','964264865','Grmmy',true,'2025-10-29 19:32:39','2025-10-29 19:22:39'),
(12,19,'AF296Y','964264865','Grmmy',true,'2025-10-29 20:19:21','2025-10-29 20:09:21'),
(13,19,'2E8PLX','964264865','Grmmy',true,'2025-10-29 20:23:16','2025-10-29 20:13:16'),
(14,19,'YZAHGW',NULL,NULL,false,'2025-10-29 20:23:44','2025-10-29 20:13:44'),
(15,19,'O147M9',NULL,NULL,false,'2025-10-29 20:23:52','2025-10-29 20:13:52'),
(16,19,'SAXC44',NULL,NULL,false,'2025-10-29 20:23:55','2025-10-29 20:13:55'),
(17,19,'L0S9W7','7780599269','bobolie',true,'2025-10-29 20:24:44','2025-10-29 20:14:44');

-- –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX IF NOT EXISTS idx_bookings_date ON bookings (booking_date);
CREATE INDEX IF NOT EXISTS idx_bookings_user_id ON bookings (user_id);
CREATE INDEX IF NOT EXISTS idx_telegram_links_code ON telegram_links (link_code);
CREATE INDEX IF NOT EXISTS idx_telegram_links_user_id ON telegram_links (user_id);
CREATE INDEX IF NOT EXISTS idx_users_email ON users (email);
CREATE INDEX IF NOT EXISTS idx_users_phone ON users (phone);

-- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
SELECT setval('users_id_seq', (SELECT MAX(id) FROM users));
SELECT setval('services_id_seq', (SELECT MAX(id) FROM services));
SELECT setval('bookings_id_seq', (SELECT MAX(id) FROM bookings));
SELECT setval('notifications_id_seq', (SELECT MAX(id) FROM notifications));
SELECT setval('telegram_links_id_seq', (SELECT MAX(id) FROM telegram_links));

-- –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –≤ bookings
INSERT INTO bookings (user_id, service_id, booking_date, booking_time, status, comment, telegram_notification) VALUES 
(22, 1, '2024-01-15', '10:00:00', 'completed', '–ü–µ—Ä–≤–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', true),
(22, 2, '2024-01-20', '14:30:00', 'confirmed', '–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞', true),
(19, 3, '2024-01-16', '11:00:00', 'completed', '–ú–∞—Å—Å–∞–∂ –ª–∏—Ü–∞', true),
(19, 4, '2024-01-25', '16:00:00', 'pending', 'S-—É—Ö–æ–¥', true);

SET session_replication_role = 'origin';

-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
DO $$ 
BEGIN
    RAISE NOTICE '‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!';
    RAISE NOTICE 'üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 2 (1 admin, 1 client)';
    RAISE NOTICE 'üíÜ –£—Å–ª—É–≥–∏: 34 –ø—Ä–æ—Ü–µ–¥—É—Ä—ã';
    RAISE NOTICE 'üìÖ –ó–∞–ø–∏—Å–∏: 4 —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏';
    RAISE NOTICE 'üîó Telegram —Å—Å—ã–ª–∫–∏: 10 –∑–∞–ø–∏—Å–µ–π';
END $$;